function checkURL(a){return window.location.pathname.substring(0,a.length)==a}function getTimezoneName(a){var b=a.dst(),c=Math.floor(a.getTimezoneOffset()/60)-2-(b?0:1);return c<0||c>5?alertsTexts.timezones.notCA[language]:alertsTexts.timezones[b?"DST":"noDST"][language][c]}function updateAlerts(){if(jwt){$.ajax({type:"POST",url:"/template/wxo/alerts.php",data:{post_jwt:jwt,lang:language},success:function(d){if(json=$.parseJSON(d),"invalid"==json.status||"oudated"==json.status)return $(".profile-link").addClass("hidden"),void $("#collapsible-alerts").addClass("hidden");$("#collapsible-alerts").html(json.alerts);var e="checkrefresh"==json.preferences[2]?1:0,f=5*e*6e4,g=new Date((new Date).getTime()+f),h=!checkURL("/myprofile")||checkURL("/myprofile/editprofile")||checkURL("/myprofile/how_to")?0:1;if(json.count>1){$("#alerttable").on("init.dt",function(){$("#alerttable").DataTable().rows().every(function(){var a=this.data(),b=$("<div>"+a[2]+"</div>");b.find(".sev-sort").remove(),a[2]=b.html(),this.data(a),this.invalidate()})}),$("#alerttable").DataTable({order:[[2,"asc"]],pageLength:10,language:alertsTexts.dataTable[language]}),$("#alerttable th").append('<span class="sorting-cnt"><span class="sorting-icons"></span></span>'),$("#alerttable").addClass("table-condensed small table-striped table-hover");var i=$("#alerttable_info").detach();$("#alerttable_length").prepend(i)}var j=g.getMinutes().toString();j<10&&(j="0"+j);var k="";if("f"===language)k=g.getHours()+"h"+j;else{var l=g.getHours();k=(l>12?l-12:l)+":"+j+(g.getHours()>=12?" PM":" AM")}var m="";if(e)m=k+" "+getTimezoneName(g);else{var n=alertsTexts.days[language][g.getDay()],o=alertsTexts.months[language][g.getMonth()],p=g.getDate(),q=g.getFullYear();m=k+" "+getTimezoneName(g)+" "+n+" "+p+" "+o+" "+q}if($("#refresh_btn").html('<img src="/cacheable/images/myprofile/'+refreshUrls[e]+'">'+alertsTexts.texts[language][e]+m),$("#refresh_btn").prop("title",alertsTexts.title[language][e][h]),window.location.href.indexOf("#")>0){var s=window.location.href.substring(window.location.href.indexOf("#")+1);null!=document.getElementById(s)&&setTimeout(function(){document.getElementById(s).scrollIntoView()},50)}}})}}var jwt=window.location.href.split("token=")[1]||localStorage.getItem("myprofilekey");if(-1!=document.location.href.indexOf("_f"))var language="f";else var language="e";(checkURL("/myprofile")&&!checkURL("/myprofile/editprofile")&&!checkURL("/myprofile/how_to")||checkURL("/forecast/hourly")||checkURL("/city/pages")||checkURL("/radar")||checkURL("/lightning")||checkURL("/warnings")||checkURL("/past_conditions")||checkURL("/provincialsummary_table")||checkURL("/hurricane"))&&updateAlerts(),jwt||$(".profile-link").addClass("hidden");var refreshUrls=["refresh_on_min.png","refresh_on_min.png"],alertsTexts={months:{e:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f:["jan","fév","mar","avr","mai","jun","jul","aoû","sep","oct","nov","déc"]},days:{e:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],f:["le dim","le lun","le mar","le mer","le jeu","le ven","le sam"]},texts:{e:[" Last updated "," Next update at "],f:[" Dernière mise à jour "," Prochaine mise à jour à "]},title:{e:[["Auto-refresh is OFF - click to manually refresh. To change your setting go to 'Edit My Profile' page","Auto-refresh is OFF - click to manually refresh. To change your setting go to 'Edit My Profile' page"],["Auto-refresh is ON - click to manually refresh. To change your setting go to 'Edit My Profile' page","Auto-refresh is ON - click to manually refresh. To change your setting go to 'Edit My Profile' page"]],f:[["Le rafraîchissement automatique est désactivé – cliquez pour actualiser manuellement. Pour modifier ce paramètre, allez à la page « Modifier mon profil ».","Le rafraîchissement automatique est désactivé – cliquez pour actualiser manuellement. Pour modifier ce paramètre, allez à la page « Modifier mon profil »."],["Le rafraîchissement automatique est activé – cliquez pour actualiser manuellement. Pour modifier ce paramètre, allez à la page « Modifier mon profil ».","Le rafraîchissement automatique est activé – cliquez pour actualiser manuellement. Pour modifier ce paramètre, allez à la page « Modifier mon profil »."]]},timezones:{notCA:{e:"local",f:"locale"},noDST:{e:["NST","AST","EST","CST","MST","PST"],f:["HNT","HNA","HNE","HNC","HNR","HNP"]},DST:{e:["NDT","ADT","EDT","CDT","MDT","PDT"],f:["HAT","HAA","HAE","HAC","HAR","HAP"]}},dataTable:{e:{info:"Showing _START_ to _END_ of _TOTAL_ entries",lengthMenu:"Show _MENU_ entries",sInfoFiltered:"(filtered from _MAX_ total entries)",oPaginate:{sPrevious:"Previous",sNext:"Next"},sEmptyTable:"Showing 0 to 0 of 0 entries",sZeroRecords:"Showing 0 to 0 of 0 entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sSearch:"Search"},f:{info:"Affiche _START_ à _END_ de _TOTAL_ entrées",lengthMenu:"Afficher _MENU_ entrées",sInfoFiltered:"(filtré de _MAX_ entrées totales)",oPaginate:{sPrevious:"Précédent",sNext:"Suivant"},sEmptyTable:"Affiche 0 à 0 de 0 entrées",sZeroRecords:"Affiche 0 à 0 de 0 entrées",sInfoEmpty:"Affiche 0 à 0 de 0 entrées",sSearch:"Filtrer les articles"}}};Date.prototype.stdTimezoneOffset=function(){var a=new Date(this.getFullYear(),0,1),b=new Date(this.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),b.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};